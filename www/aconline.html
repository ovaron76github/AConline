<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>ArmyCreator Online</title>

        <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png">
        <link rel="manifest" href="./site.webmanifest">
        <link rel="mask-icon" href="./safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">

        <meta http-equiv="cache-control" content="max-age=0">
        <meta http-equiv="cache-control" content="no-cache">
        <meta http-equiv="expires" content="-1">
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 11:00:00 GMT">
        <meta http-equiv="pragma" content="no-cache">

        <link rel="stylesheet" href="./css/bootstrap.min.css">
        <link rel="stylesheet" href="./pictures/icons/bootstrap-icons.css">
        <link rel="stylesheet" href="./css/acweb.css">
        <script src="./js/jquery-3.6.0.min.js"></script>
        <script src="./js/bootstrap.bundle.js"></script>
        <script src="./js/input-spinner.js"></script>
        <script src="./js/acarmylist.js"></script>
        <script src="./js/acweb.js"></script>
    </head>

    <body class="myBodyColor fixScrolling myBodyFix d-flex flex-column h-100 border border-warning rounded" id="top">
        <style type="text/css">
            .popover{
                max-width:600px;
            }
        </style>
        <header>
            <nav class="navbar navbar-expand-md navbar-dark fixed-top header bg-dark">
                <div class="container-fluid">
                    <a class="navbar-brand" href="#top"><img src="pictures/ArmyCreator.png" style="width: 60px;"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
                            aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarCollapse">
                        <ul class="navbar-nav me-auto mb-2 mb-md-0">
                            <li class="nav-item">
                                <a class="nav-link card-hover" href="./index.html"><i class="bi bi-shop"></i> Army</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#categoryList"><i class="bi bi-ladder"></i> Categories</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link card-hover" href="#unitlist"><i class="bi bi-list"></i> Units</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link card-hover" href="#optionlist"><i class="bi bi-list-check"></i> Options</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link card-hover" href="#rosterArea"><i class="bi bi-table"></i> Roster</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link card-hover" href="#calculationArea"><i class="bi bi-calculator"></i> Calculation</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link card-hover" href="#actionArea"><i class="bi bi-menu-button"></i> Actions</a>
                            </li>
                        </ul>
                        <ul class="navbar-nav navbar-right">
                            <li>
                                <a style="float:right;font-size:smaller;color:#e8692d;" class="btn card-hover myHeaderColor" id="mode"
                                   onclick="toggleDisplayMode();">Light</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>

        <main class="flex-shrink-0">

            <div class="container-fluid mb-3">
                <div class="row">
                    <!--Army Name-->
                    <div class="col-sm float-start mt-1">
                        <div class="text-start">
                            <div class="" style="float: left;" id="armyIcon"></div>
                            <div id="armyinfo" style="font-weight: bold;font-style: italic; color:#e8692d;">ArmyName</div>
                        </div>
                    </div>
            
                    <!--Cost limit-->
                    <div class="col-sm float-end mt-1">
                        <div class="input-group rounded shadow float-end">
                            <span class="input-group-text myHeaderBackground">Cost limit</span>
                            <input class="form-control input-sm" type="text" id="maxArmyPoints" name="num" min="0" max="9999999" value="0" inputmode="decimal" />
                            <span class="input-group-text myHeaderBackground">points</span>
                        </div>
                        <p class="text-end"><em><font size="-1">0 = unlimited</font></em></p>
                    </div>
                </div>
            </div>
            
            <!--Category List-->
            <div class="container-fluid">
                <div class="card card-text myBodyColor fixScrolling shadow" id="categoryList">
                    <div class="myHeaderBackground rounded-top">
                        <div class="btn" data-bs-toggle="collapse" href="#categories" role="button" aria-expanded="false"
                             aria-controls="categories">
                            <i class="bi bi-chevron-down"></i> <i class="bi bi-ladder"></i> <b>Categories</b>
                        </div>
                    </div>

                    <div class="colapse show rounded" id="categories">
                    </div>
                </div>
            </div>

            <!--Units and Options-->
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md card-text fixScrolling rounded" id="unitlist" style="padding-top:20px;">
                        <div class="myHeaderBackground rounded-top">
                            <div class="btn" data-bs-toggle="collapse" href="#collapseUnits" role="button"
                                 aria-expanded="false" aria-controls="collapseUnits">
                                <i class="bi bi-chevron-down"></i> <i class="bi bi-list"></i> <b>Units</b>
                            </div>

                        </div>
                        <div class="collapse show shadow rounded-bottom myBorder" id="collapseUnits">
                            <div class="myDivColor rounded-bottom" id="categoryUnits"></div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md card-text fixScrolling rounded" id="optionlist" style="padding-top:20px;">
                        <div class="myHeaderBackground rounded-top">
                            <div class="btn" data-bs-toggle="collapse" href="#collapseOptions" role="button"
                                 aria-expanded="false" aria-controls="collapseOptions">
                                <i class="bi bi-chevron-down"></i> <i class="bi bi-list-check"></i> <b>Options</b>
                            </div>
                            <a href="#calculationArea" title="Calculation">
                                <p class="float-end card-text me-3 mt-1"><i class="bi bi-calculator" style="color:#e8692d"></i></p>
                            </a>
                            <a href="#unitlist" title="Units">
                                <p class="float-end card-text me-3 mt-1"><i class="bi bi-list" style="color:#e8692d"></i></p>
                            </a>
                        </div>
                        <div class="collapse show shadow rounded-bottom myDivColor myBorder" id="collapseOptions">
                            <div id="unitOptions" class="card-header myDivColor"></div>
                            <div id="unitOptionActions" class="myDivColor rounded-bottom" style="padding:10px;">
                                <button type="button" class="btn btn-outline-success btn-sm" id="btnAddUnit"
                                        onclick="addActualUnitToRoster();">Add</button>
                                <button type="button" class="btn btn-outline-warning btn-sm"
                                        onclick="addActualUnitToRoster('replace');">Update</button>
                                <button type="button" class="btn btn-outline-danger btn-sm" style="float:right;"
                                        onclick="deselectAllOptions();">Clear</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--Roster Area-->
            <div class="container-fluid" style="padding-top:20px;">
                <div class="card-text fixScrolling shadow rounded myBorder" id="rosterArea">
                    <div class="myHeaderBackground rounded-top">
                        <div class="btn" data-bs-toggle="collapse" href="#rosterTableCollape" role="button"
                             aria-expanded="false" aria-controls="rosterTableCollape">
                            <i class="bi bi-chevron-down"></i> <i class="bi bi-table"></i> <b>Roster</b>
                        </div>
                    </div>

                    <div class="collapse show myDivColor rounded-bottom" id="rosterTableCollape">
                        <div id="rosterTable"></div>
                        <div class="clearfix">
                            <button type="button" class="btn btn-outline-danger btn-sm float-end"
                                    style="margin-bottom: 10px;margin-right: 10px;" id="bntClearRoster"
                                    onclick="clearRosterConfirmation();">Clear</button>
                        </div>
                    </div>
                </div>
            </div>

            <!--Calculation Area + Action buttons-->
            <div class="container-fluid">
                    <!-- Calculation Area-->
                    <div class="row">
                        <div class="col-md" style="padding-top:20px;">
                        <div class="card-text fixScrolling shadow rounded myBorder myDivColor" id="calculationArea">
                            <div class="myHeaderBackground rounded-top">
                                <div class="btn" data-bs-toggle="collapse" href="#calculation" role="button"
                                     aria-expanded="false" aria-controls="calculation">
                                    <i class="bi bi-chevron-down"></i> <i class="bi bi-calculator"></i> <b>Calculation</b>
                                </div>
                            </div>
                            <div class="collapse show myDivColor rounded-bottom" id="calculation"></div>
                        </div>
                    </div>
                    </div>

                    <div class="row">
                    <!--Action buttons-->
                    <div class="col-md" style="padding-top:20px;">
                        <div class="card-text fixScrolling shadow rounded myBorder" id="actionArea">
                            <div class="myHeaderBackground rounded-top">
                                <div class="btn" data-bs-toggle="collapse" href="#actions" role="button"
                                     aria-expanded="false" aria-controls="actions">
                                    <i class="bi bi-chevron-down"></i> <i class="bi bi-menu-button"></i> <b>Actions</b>
                                </div>
                            </div>
                            <div class="collapse show myDivColor rounded-bottom" id="actions">
                                <div class="container-fluid rounded-bottom myDivColor">
                                    <div class="dropdown rounded-bottom myDivColor" style="margin-left:-15px;">
                                        <button class="btn btn-sm card-hover dropdown-toggle myActionButtonBackground"
                                                style="margin-top:10px;margin-bottom:10px; width:120px;" type="button" id="uploadButton"
                                                data-bs-toggle="dropdown" aria-expanded="false">Load</button>
                                        <ul class="dropdown-menu myActionButtonBackground" aria-labelledby="uploadButton">
                                            <li><a class="dropdown-item myActionButtonBackground"
                                                   id="import-pfx-button"><i class="bi bi-file-arrow-down"></i> Load
                                                    from <b>Device</b></a></li>
                                            <input type="file" id="file-input" />
                                            <li><a class="dropdown-item myActionButtonBackground" id="cloudLoginBtn"
                                                   data-bs-toggle="modal" data-bs-target="#cloudLogin"
                                                   title="Cloud login"><i class="bi bi-cloud-download"></i> Load
                                                    from <b>CreatorCloud</b></a>
                                            </li>
                                        </ul>
                                        <button class="btn btn-sm card-hover dropdown-toggle myActionButtonBackground"
                                                style="margin-top:10px;margin-bottom:10px; width:120px;" type="button" id="showButton"
                                                data-bs-toggle="dropdown" aria-expanded="false">Show</button>
                                        <ul class="dropdown-menu myActionButtonBackground" aria-labelledby="showButton">
                                            <li><a class="dropdown-item myActionButtonBackground" id="showHtml"
                                                   onclick="createAndShowHtml();"><i class="bi bi-file-text"></i> Show <b>HTML</b>
                                                    Roster</a></li>
                                            <li><a class="dropdown-item myActionButtonBackground" id="showPDF"
                                                   onclick="createAndShowPDF();"><i class="bi bi-file-text"></i> Show <b>PDF</b>
                                                    Roster</a></li>

                                            <li><a class="dropdown-item myActionButtonBackground" id="showBBCode"
                                                   onclick="createBBcode();"><i class="bi bi-file-text"></i> Show <b>BBcode</b>
                                                    Roster</a></li>
                                            <li><a class="dropdown-item myActionButtonBackground" id="showTextCode"
                                                   onclick="createTextRoster();"><i class="bi bi-file-text"></i> Show
                                                    <b>Text</b> Roster</a></li>
                                        </ul><br>
                                        <button class="btn btn-sm card-hover dropdown-toggle myActionButtonBackground"
                                                style="margin-top:10px;margin-bottom:10px; width:120px;" type="button"
                                                id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                                            Download</button>
                                        <ul class="dropdown-menu myActionButtonBackground"
                                            aria-labelledby="dropdownMenuButton1">
                                            <li><a class="dropdown-item myActionButtonBackground" id="download"
                                                   onclick="downloadRoster();"><i class="bi bi-download"></i> Download
                                                    <b>Roster</b></a></li>
                                            <li><a class="dropdown-item myActionButtonBackground" id="downloadHTML"
                                                   onclick="createHtml();"><i class="bi bi-download"></i> Download
                                                    <b>HTML</b></a></li>
                                            <li><a class="dropdown-item myActionButtonBackground" id="downloadPDF"
                                                   onclick="createPdf();"><i class="bi bi-download"></i> Download
                                                    <b>PDF</b></a></li>	
                                        </ul>
                                        <button class="btn btn-sm card-hover dropdown-toggle myActionButtonBackground"
                                                style="margin-top:10px;margin-bottom:10px; width:120px;" type="button"
                                                id="dropDownButtonUpload" data-bs-toggle="dropdown"
                                                aria-expanded="false">Upload</button>
                                        <ul class="dropdown-menu myActionButtonBackground"
                                            aria-labelledby="dropDownButtonUpload">
                                            <li><a class="dropdown-item myActionButtonBackground" id="cloudUploadBtn"
                                                   data-bs-toggle="modal" data-bs-target="#cloudLoginUpload"
                                                   title="Cloud login"><i class="bi bi-cloud-upload"></i> Upload to
                                                    <b>CreatorCloud</b></a></li>
                                        </ul>
                                        
                                        <div class="col-auto form-floating" style="margin-top:10px;">
                                            <input type="text" class="form-control" id="rosterName" placeholder="roster">
                                            <label for="rosterName"><b>Roster name</b> (without extention)</label>
                                        </div>
                                        <br>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <br><br><br>
        </main>

        <!-- Error and point info-->
        <footer class="footer mt-auto py-1 bg-dark fixed-bottom shadow" id="footer">
            <table width="100%">
                <td>
                    <div class="container-fluid" >
                        <span class="text-light position-relative" id="rostercheck">No errors found.</span>
                    </div>
                </td>
                <td>
                    <div class="text-light float-end position-absolute top-0 end-0 mt-1 me-2" id="footerCosts"></div>
                </td>
            </table>
        </footer>

        <!--Attachment selection-->
        <div class="modal fade" id="addAttachment" tabindex="-1" aria-labelledby="titleAttachment" aria-hidden="true"
             uuid="">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header myDivColor">
                        <h5 class="modal-title" id="titleAttachment">Attach unit...</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body myDivColor" id="attachlist">
                    </div>
                    <div class="modal-footer myDivColor">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" onclick="saveAttachment();">Attach
                            selected</button>
                    </div>
                </div>
            </div>
        </div>

        <!--Toast Message-->
        <div id="placeToast"></div>

        <!--Cloud Login Download-->
        <div class="modal fade" id="cloudLogin" tabindex="-1" aria-labelledby="titleCloud" aria-hidden="true" uuid="">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header myDivColor">
                        <h5 class="modal-title" id="titleCloud">CreatorCloud login</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body myDivColor" id="userCredentials">
                        <div class="form-group">
                            <label for="userInput">Username</label>
                            <input type="username" class="form-control" id="userInput" placeholder="Enter username">
                        </div>
                        <div class="form-group">
                            <label for="inputPassword">Password</label>
                            <input type="password" class="form-control" id="inputPassword" placeholder="Password">
                        </div>
                    </div>
                    <div class="modal-footer myDivColor">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary" onclick="listCloudData();">Show rosters</button>
                    </div>
                </div>
            </div>
        </div>

        <!--Cloud Login Upload-->
        <div class="modal fade" id="cloudLoginUpload" tabindex="-1" aria-labelledby="titleCloud" aria-hidden="true" uuid="">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header myDivColor">
                        <h5 class="modal-title" id="titleCloudUpload">CreatorCloud Upload</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body myDivColor" id="userCredentialsUpload">
                        <div class="input-group mb-3">
                            <input type="username" class="form-control" id="userInputUpload"
                                   placeholder="Enter cloud username">
                            <span class="input-group-text col-3" id="userSpan">Username</span>
                        </div>
                        <div class="input-group mb-3">
                            <input type="password" class="form-control" id="inputPasswordUpload"
                                   placeholder="Enter cloud password">
                            <span class="input-group-text col-3" id="passwordSpan">Password</span>
                        </div>
                        <div class="input-group mb-3">
                            <input type="filename" class="form-control" id="inputFilenamedUpload"
                                   placeholder="Roster filename for cloud" onkeyup="this.value = this.value.toLowerCase();">
                            <span class="input-group-text col-3" id="filenameSpan">Filename</span>
                        </div>
                        <div class="input-group mb-3">
                            <textarea class="form-control" id="descriptionUpload" aria-label="Description"
                                      placeholder="Description for roster"></textarea>
                            <span class="input-group-text col-3" id="descriptionSpan">Comment</span>
                        </div>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="shareWithOthersUpload">
                            <label class="form-check-label" for="shareWithOthersUpload">Don't share with other users</label>
                        </div>
                    </div>
                    <div class="modal-footer myDivColor">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary" onclick="uploadRostertoCloud();">Upload
                            roster</button>
                    </div>
                </div>
            </div>
        </div>

        <!--Cloud roster list-->
        <div class="modal fade" id="cloudRosterSelection" tabindex="-1" role="dialog"
             aria-labelledby="cloudRosterSelectionTitle" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-scrollable" role="document">
                <div class="modal-content">
                    <div class="modal-header myDivColor">
                        <h5 class="modal-title" id="cloudRosterSelectionTitle">Cloud Roster</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body myDivColor" id="cloudRosterSelectionText"></div>
                    <div class="modal-footer myDivColor">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal"
                                onclick="$('#cloudRosterSelection').modal('hide');">Cancel</button>
                        <button type="button" class="btn btn-primary" onclick="loadCloudRoster();">Load Roster</button>
                    </div>
                </div>
            </div>
        </div>

        <!--Confirmation box-->
        <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="confirmDialog" aria-hidden="true"
             id="confirmBox">
            <div class="modal-dialog modal-sm" role="document">
                <div class="modal-content">
                    <div class="modal-header myDivColor">
                        <h5 class="modal-title" id="confirmDialogTitle">Confirmation</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body myDivColor" id="confirmText">Should list be deleted?</div>
                    <div class="modal-footer myDivColor">
                        <button type="button" class="btn btn-primary" id="modal-btn-yes">Yes</button>
                        <button type="button" class="btn btn-secondary" id="modal-btn-no">No</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading Screen -->
        <div id="loading" onclick="setElementVisible('#loading', false);"></div>

        <script>
            $('.navbar-collapse a').click(function () {
                $(".navbar-collapse").collapse('hide');
            });
        </script>

        <br>

    </body>

</html>